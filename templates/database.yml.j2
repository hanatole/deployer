name: {{service_name}}
services:
  {{service_name}}:
    image: {{ docker_image }}
    container_name: {{service_name}}
    restart: unless-stopped

{% if db_type == "postgresql" %}
    environment:
      POSTGRES_USER: ${DB_USER}
      POSTGRES_PASSWORD: ${DB_PASSWORD}
      POSTGRES_DB: ${DB_NAME}
{% endif %}

    volumes:
      - {{service_name}}:{{volume_path}}

    networks:
      - {{ network_name }}

networks:
  {{ network_name }}:
    name: {{ network_name }}
    external: true

volumes:
  {{service_name}}:

